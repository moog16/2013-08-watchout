<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.1/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/2.7.4/d3.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <style>
      body {
        background: url(http://latentflip.com/LearningD3/collider/bo_play.png);
      }
      #scoreBoard {
        padding: 10px;
        position: absolute;
        top: 40px;
        left: 1200px;
        background: #ddd;
        text-align: right;
        border-radius: 3px;
      }
      #scoreBoard span {
        display: inline-block;
        width: 50px;
        position: absolute;
      }
      #mainBody {
        background: white;
        padding: 40px;
        margin: 40px;
        height: 700px;
        width: 900px;
      }
    </style>
  </head>
  <body>
    <div id="mainBody">
      <div id="scoreBoard">
        <h3>Current Score: <span id="current-score"></span> </h3>
        <h3>High Score: <span id="best-score"></span></h3>
      </div>
    </div>
  </body>
  <script>
  $(document).ready(function(){
    var boardOptions = {height: 700, width: 900, nEnemies: 30};
    var gameBoard = d3.select('#mainBody').append('svg:svg').attr('width', boardOptions.width).attr('height', boardOptions.height);
    var axes = {x: d3.scale.linear().domain([0,100]).range([0,boardOptions.width]),y: d3.scale.linear().domain([0,100]).range([0,boardOptions.height])};
    var makeEnemies = function() {
      return _.range(0,boardOptions.nEnemies).map(function(i){
        return {id: i, x: Math.random()*100, y: Math.random()*100}});
    };
    var enemy_data = makeEnemies();
    //d3.select("#mainBody").selectAll('svg').data(createEnemies).enter().append('svg').attr('height', 20).attr('width', 20).append('circle').attr('r', 10).attr('cx', 10).attr('cy', 10);

    var enemies = gameBoard.selectAll('circle.enemy').data(enemy_data, function(d) {
      return d.id;
    });
    enemies.enter().append('svg:circle').attr('class', 'enemy').attr('cx', function(enemy) {
      return axes.x(enemy.x);
    }).attr('cy', function(enemy) {
      return axes.y(enemy.y);
    }).attr('r', 10).style("fill", "purple");

    //.append("svg").attr("width", 20).attr("height", 20).append("circle").attr("cx", 10).attr("cy", 10).attr("r", 10).style("fill", "purple");

  });
  </script>
</html>
